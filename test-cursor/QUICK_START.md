# 快速开始指南

## 1. 环境准备

### 前置要求
- Node.js（用于运行代理服务器）
- 现代浏览器（Chrome、Firefox、Edge、Safari）
- 后端API服务运行在 `http://192.168.2.31:8080`

### 启动项目

**方式1：使用代理服务器（推荐）**

```bash
# 进入项目目录
cd test-cursor

# 启动代理服务器
node proxy-server.js

# 浏览器访问
# http://localhost:3000/login.html
```

**方式2：使用Live Server**

1. 在VS Code中安装Live Server插件
2. 右键点击HTML文件 → Open with Live Server
3. 访问 `http://127.0.0.1:5500/login.html`

---

## 2. 登录系统

### 手机号登录

1. 访问 `login.html`
2. 选择"手机号登录"标签
3. 输入手机号（格式：1开头的11位数字）
4. 点击"立即发送"获取验证码
5. 输入验证码
6. 点击"登录"

### 邮箱登录

1. 访问 `login.html`
2. 选择"邮箱登录"标签
3. 输入邮箱地址
4. 点击"立即发送"获取验证码
5. 输入验证码
6. 点击"登录"

**注意：**
- 首次登录会自动注册新用户
- 验证码有效期60秒
- 发送验证码后需等待60秒才能重新发送

---

## 3. 充值积分

### 充值流程

1. 登录后点击右上角"立即充值"按钮
2. 在充值页面输入金额
   - 可以手动输入
   - 或点击快捷金额按钮（10元、20元、50元等）
3. 点击"支付宝支付"图标
4. 在弹窗中确认订单信息
5. 在新窗口中完成支付宝支付
6. 支付成功后页面会自动刷新积分

**充值规则：**
- 最低充值：1元
- 最高充值：10000元
- 兑换比例：1元 = 1积分

**支付状态查询：**
- 系统每5秒自动查询一次支付状态
- 最多查询10分钟（120次）
- 支付成功后积分会立即到账

---

## 4. 创建任务

### 4.1 论文写作（范文生成）

1. 访问 `task-center.html`
2. 填写基础信息：
   - **论文标题**：必填，如"人工智能在教育领域的应用"
   - **专业领域**：必填，如"教育学"
   - **目标字数**：必填，如 8000
   - **数据状态**：选择"不需要"、"需要但没数据"或"数据在资料中"
   - **引文格式**：选择"GBT7714"、"APA"或"不需要文献"
   
3. 选择交付文件类型：
   - 论文（必选）
   - 数据文件（可选）
   - 访谈大纲/问卷（可选）
   - 代码（可选）
   
4. 填写写作与特殊要求：
   - 描述写作方向、研究方法等
   - 例如："论文需要包含图表，引用至少50篇文献"
   
5. （可选）上传相关资料文件：
   - 支持PDF、Word、TXT等格式
   - 单个文件不超过20MB
   
6. 点击"提交任务"

### 4.2 文章降重

1. 访问 `task-article.html`
2. 上传待降重文档：
   - 点击上传区域选择文件
   - 或直接拖拽文件到上传区域
   - 单个文件不超过20MB
3. 点击"提交任务"

### 4.3 段落降重

1. 访问 `task-paragraph.html`
2. 在输入框中粘贴待降重的段落内容：
   - 建议长度：200-1000字
   - 最短：10字
   - 最长：2000字
3. 点击"提交任务"
4. 等待处理完成，结果会显示在下方

---

## 5. 查看任务

### 任务列表

1. 点击顶部"我的任务"按钮
2. 查看所有任务记录：
   - 创建时间
   - 功能类型（范文生成/文章降重/段落降重）
   - 任务进度（待处理/处理中/已完成/失败）
   - 操作按钮（删除/下载）

### 任务状态

- **待处理**：任务已提交，等待系统处理
- **处理中**：AI正在生成内容
- **已完成**：任务完成，可以下载
- **失败**：任务处理失败，请联系客服

### 下载结果

1. 等待任务状态变为"已完成"
2. 点击"下载"按钮
3. 在新窗口中打开/下载文件

---

## 6. 查看用户信息

### 用户信息显示

登录后，在所有任务页面的右上角可以看到：
- **用户头像**：显示账号首字母
- **用户名**：显示账号前几位
- **积分余额**：实时显示当前可用积分

### 刷新积分

积分会在以下情况自动刷新：
- 充值成功后
- 创建订单后
- 手动刷新页面

---

## 7. 登出

1. 点击右上角"切换"按钮
2. 在弹窗中确认"确定要登出当前账号吗？"
3. 系统会：
   - 调用后端登出接口
   - 清除Session和Cookie
   - 清除本地缓存（用户信息、任务列表等）
   - 跳转到登录页

---

## 8. 常见问题

### Q1: 登录后显示"未登录或登录已过期"

**原因：**
- Session过期
- Cookie被清除
- 跨域问题导致Cookie未保存

**解决方案：**
1. 检查是否通过代理服务器访问（推荐端口3000）
2. 清除浏览器缓存和Cookie
3. 重新登录
4. 联系后端检查CORS配置

### Q2: 积分扣除了但任务未创建

**原因：**
- 订单创建接口失败
- 积分被冻结但订单未生成

**解决方案：**
1. 查看浏览器控制台的错误信息
2. 联系客服查询订单状态
3. 如确认未创建，可申请退还积分

### Q3: 充值后积分未到账

**原因：**
- 支付回调延迟
- 支付状态查询失败

**解决方案：**
1. 刷新页面查看积分
2. 等待5-10分钟后再查看
3. 联系客服查询支付记录

### Q4: 任务一直显示"处理中"

**原因：**
- AI处理时间较长
- 系统繁忙

**解决方案：**
1. 等待30分钟后再查看
2. 刷新页面查看最新状态
3. 如超过1小时仍未完成，联系客服

### Q5: 文件上传失败

**原因：**
- 文件大小超过20MB
- 文件格式不支持
- 网络问题

**解决方案：**
1. 检查文件大小
2. 确认文件格式（支持PDF、Word、TXT等）
3. 检查网络连接
4. 尝试压缩文件后重新上传

### Q6: 跨域问题（CORS错误）

**错误信息：**
```
Access to fetch at 'http://...' from origin '...' has been blocked by CORS policy
```

**解决方案：**

**方案1：使用代理服务器**
```bash
node proxy-server.js
# 然后访问 http://localhost:3000/login.html
```

**方案2：联系后端配置CORS**

后端需要添加以下响应头：
```
Access-Control-Allow-Origin: *
Access-Control-Allow-Methods: GET, POST, PUT, DELETE, OPTIONS
Access-Control-Allow-Headers: Content-Type
Access-Control-Allow-Credentials: true
```

### Q7: 验证码收不到

**可能原因：**
- 手机号/邮箱格式错误
- 短信/邮件服务器问题
- 频繁发送被限制

**解决方案：**
1. 检查手机号/邮箱格式
2. 等待60秒后重试
3. 联系客服

---

## 9. 浏览器控制台调试

### 查看API调用

打开浏览器控制台（F12），切换到"Network"标签，可以看到所有API请求：

- **请求URL**：API接口地址
- **请求方法**：GET/POST等
- **请求参数**：发送的数据
- **响应状态**：200成功，其他为错误
- **响应数据**：返回的JSON数据

### 查看本地缓存

在控制台的"Application"标签中：

1. **localStorage**：
   - `account`：用户账号
   - `userId`：用户ID
   - `userInfo`：用户完整信息
   - `myTasks`：任务列表

2. **Cookies**：
   - Session ID
   - 其他认证信息

### 查看错误日志

在控制台的"Console"标签中可以看到：
- JavaScript错误
- API调用日志
- 业务逻辑日志

---

## 10. 联系支持

如遇到其他问题，请联系技术支持：

- **邮箱**：support@example.com
- **电话**：400-xxx-xxxx
- **工作时间**：周一至周五 9:00-18:00

提供以下信息以便快速解决问题：
1. 用户ID或账号
2. 问题截图
3. 浏览器控制台的错误信息
4. 操作步骤描述

---

## 附录：快捷键

| 快捷键 | 功能 |
|--------|------|
| F12 | 打开开发者工具 |
| Ctrl + Shift + R | 强制刷新页面（清除缓存） |
| Esc | 关闭提示弹窗 |

---

**祝您使用愉快！**

