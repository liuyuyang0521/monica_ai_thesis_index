# Monica AI Thesis Index

前端项目 - AI 赋能科研任务中心

## 项目简介

这是一个基于 AI 的学术研究辅助工具前端项目，提供以下功能：

- **AI 范文生成**：根据需求自动生成高质量范文
- **文章降重**：智能改写技术，降低 AI 检测率和重复率
- **段落降重**：适合处理较短段落，直接粘贴原文内容
- **在线充值**：支持支付宝在线支付充值积分

## 技术栈

- HTML5
- CSS3
- JavaScript (原生)
- 响应式设计

## 项目结构

```
.
├── index.html               # 首页
├── login.html               # 登录页面
├── task-center.html         # 范文生成页面
├── task-article.html        # 文章降重页面
├── task-paragraph.html      # 段落降重页面
├── task-payment.html        # 在线充值页面
├── my-task.html             # 我的任务页面
├── styles.css               # 全局样式
├── login.css                # 登录页样式
├── task.css                 # 任务页样式
├── script.js                # 首页脚本
├── login.js                 # 登录页脚本
├── task.js                  # 任务页脚本
├── toast.js                 # 提示框组件
├── api.js                   # 统一的API配置和工具函数 ✨ 新增
├── page-init.js             # 页面初始化脚本 ✨ 新增
├── task-center.js           # 论文写作订单提交逻辑 ✨ 新增
├── task-article.js          # 文章降重订单提交逻辑 ✨ 新增
├── task-paragraph.js        # 段落降重订单提交逻辑 ✨ 新增
├── task-payment.js          # 充值支付功能 ✨ 新增
├── my-task.js               # 任务列表查询和管理 ✨ 新增
├── proxy-server.js          # 开发环境代理服务器
├── API_IMPLEMENTATION.md    # API实现详细说明 ✨ 新增
└── images/                  # 图片资源
```

## 开发环境设置

### 使用代理服务器（推荐，解决 CORS 问题）

1. 启动代理服务器：
   ```bash
   node proxy-server.js
   ```

2. 访问页面：
   ```
   http://localhost:3000/login.html
   ```

### 使用 Live Server

1. 在 VS Code 中安装 Live Server 插件
2. 右键点击 HTML 文件，选择 "Open with Live Server"
3. 访问页面（通常是 `http://127.0.0.1:5500`）

## API 配置

项目中的 API 请求会自动根据访问端口选择：

- **代理服务器（端口 3000）**：通过代理转发，自动处理 CORS
- **Live Server（其他端口）**：直接访问后端 API

后端 API 地址：`http://47.243.255.193:8080/api`（云服务器）

## 功能说明

### 1. 用户系统

#### 登录功能
- 支持手机号和邮箱两种登录方式
- 验证码登录，首次登录自动注册
- 自动保存用户信息到 localStorage
- Cookie/Session 认证支持

#### 用户信息显示
- 页面加载时自动获取用户信息
- 显示用户头像和昵称
- 实时显示积分余额

#### 登出功能
- 调用后端登出接口
- 清除Session和Cookie
- 清除本地缓存
- 跳转到登录页

### 2. 订单系统

#### 论文写作订单（task-center.html）
- 完整的表单验证
- 支持上传参考资料文件
- 自动扣除积分
- 创建成功后跳转到"我的任务"

**订单参数：**
- 论文标题
- 专业领域
- 目标字数
- 数据状态
- 引文格式
- 交付文件类型
- 写作要求

#### 文章降重订单（task-article.html）
- 支持上传待降重文档
- 文件大小验证（最大20MB）
- 自动扣除积分

#### 段落降重订单（task-paragraph.html）
- 直接粘贴段落内容
- 实时处理结果显示
- 自动轮询任务状态

### 3. 支付系统

#### 在线充值（task-payment.html）
- 支持支付宝PC收银台支付
- 充值金额验证（最少1元）
- 快捷金额选择
- 自动轮询支付状态
- 支付成功后自动刷新积分

**充值规则：**
- 1元 = 1积分
- 单次最高充值10000元

### 4. 任务管理

#### 我的任务列表（my-task.html）
- 显示所有任务记录
- 实时任务进度显示
- 支持删除任务
- 任务完成后可下载

**任务状态：**
- 待处理
- 处理中
- 已完成
- 失败

### 5. 错误码处理

项目包含完整的错误码映射表，支持后端返回的所有错误码：

- **系统级错误（1xxxx）**
  - 10000: 系统异常
  - 10003: 未登录或登录已过期（自动跳转登录页）
  
- **用户模块（11xxx）**
  - 11001: 用户不存在
  - 11004: 手机号已被注册
  
- **验证码模块（12xxx）**
  - 12002: 验证码错误
  - 12003: 验证码已过期
  
- **积分模块（31xxx）**
  - 31001: 积分不足（提示充值）
  
- **订单模块（41xxx）**
  - 41006: 订单创建失败
  
- **支付模块（51xxx）**
  - 51002: 支付失败

## 浏览器支持

- Chrome（推荐）
- Firefox
- Edge
- Safari

## 使用流程

### 完整使用流程

1. **登录**
   ```
   访问 login.html → 输入手机号/邮箱 → 发送验证码 → 登录
   ```

2. **查看积分**
   ```
   登录成功后，页面顶部显示当前积分余额
   ```

3. **充值**
   ```
   点击"立即充值" → 输入金额 → 支付宝支付 → 等待支付成功 → 积分自动到账
   ```

4. **创建任务**
   ```
   选择任务类型（范文生成/文章降重/段落降重） → 填写表单 → 提交任务 → 扣除积分
   ```

5. **查看任务**
   ```
   点击"我的任务" → 查看任务进度 → 任务完成后下载
   ```

6. **登出**
   ```
   点击"切换"按钮 → 确认登出 → 跳转到登录页
   ```

## 注意事项

1. **开发环境**
   - 建议使用代理服务器（`node proxy-server.js`），避免 CORS 跨域问题
   - 或确保后端配置了正确的CORS头

2. **登录认证**
   - 所有任务页面需要登录才能访问
   - 未登录或登录过期会自动跳转到登录页
   - Session通过Cookie维护

3. **积分系统**
   - 创建订单会冻结相应积分
   - 积分不足时无法创建订单
   - 支付成功后积分会自动写入账户

4. **文件上传**
   - 当前版本文件上传功能未完全实现
   - 仅支持选择文件，未实现上传到服务器
   - 实际使用时需要先实现文件上传接口

5. **任务列表**
   - 当前使用本地缓存管理任务列表
   - 建议后端提供统一的任务列表查询接口
   - 详见 `API_IMPLEMENTATION.md`

## API文档

详细的API实现说明请查看 [API_IMPLEMENTATION.md](./API_IMPLEMENTATION.md)

包含内容：
- 所有API接口的使用方法
- 请求参数和响应格式
- 错误处理机制
- 待完善功能列表

## License

Copyright © 2025 AIWhim. All rights reserved.

